/*! alternative log function */
window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);(typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,a))}};
/*! make it safe to use console.log always */
(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})((function(){try{console.log();return window.console}catch(a){return window.console={}}})());
/*! date.js - Custom Date methods */
Date.prototype.DAYNAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.prototype.MONTHNAMES=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.prototype.msPERMIN=1000*60;Date.prototype.msPERDAY=1000*60*60*24;Date.prototype.addWeekDays=function(e){var c=this.getDay();var b=0;var a=e%5;if(e<0){b=Math.ceil(e/5);switch(c){case 6:if(a==0&&b<0){b++}break;case 0:if(a==0){e++}else{e--}break;default:if(a<=-c){b--}}}else{if(e>0){b=Math.floor(e/5);switch(c){case 6:if(a==0){e--}else{e++}break;case 0:if(a==0&&b>0){b--}break;default:if(5-c<a){b++}}}}e+=b*2;this.addDays(e)};Date.prototype.addDays=function(a){this.setDate(this.getDate()+a)};Date.prototype.addWeeks=function(a){this.setDate(this.addDays(a*7))};Date.prototype.addMonths=function(a){this.setMonth(this.getMonth()+a)};Date.prototype.addMonthsTrunc=function(a){var b=this.getDate();this.setMonth(this.getMonth()+a);if(this.getDate()<b){this.setDate(0)}};Date.prototype.addYears=function(b){var a=this.getMonth();this.setFullYear(this.getFullYear()+b);if(a<this.getMonth()){this.setDate(0)}};Date.prototype.copy=function(){return new Date(this.getTime())};Date.prototype.getDaysBetween=function(c){var a=c.copy();a.setUTCHours(this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds(),this.getUTCMilliseconds());var b=a.getTime()-this.getTime();return b/this.msPERDAY};Date.prototype.getCDay=function(){return this.getDayName().slice(0,3)};Date.prototype.getDayName=function(){return this.DAYNAMES[this.getDay()]};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),0,0);return this.getDaysBetween(a)*-1};Date.prototype.getCMonth=function(){return this.getMonthName().slice(0,3)};Date.prototype.getMonthName=function(){return this.MONTHNAMES[this.getMonth()]};Date.prototype.getWeekDays=function(f){var b=0,g=0;var a=0,c=0;g=Math.abs(this.getDaysBetween(f));if(g){a=(f<this)?f.getDay():this.getDay();c=(f<this)?this.getDay():f.getDay();b=Math.floor(g/7);if(a!=6&&a>c){b++}if(a!=c&&(a==6||c==6)){g--}g-=(b*2)}return g};Date.prototype.getMonthsBetween=function(c){var b=this.getFullYear()*12+this.getMonth();var a=c.getFullYear()*12+c.getMonth();return a-b};Date.prototype.getMonthsBetween2=function(j){var i,n;var b=this.getFullYear()*12+this.getMonth();var a=j.getFullYear()*12+j.getMonth();var e;var c=0;var m,o,l,h,g,f,k;if(this==j){c=0}else{if(b==a){c=(j.getDate()-this.getDate())/this.lastday()}else{if(b<a){i=this;n=j;e=1}else{i=j;n=this;e=-1}m=i.getDate();o=i.lastday();h=n.getDate();eLastDay=n.lastday();if(m>eLastDay){k=h/eLastDay}else{l=o-m;f=h>o?o:h;k=(l+f)/o}c=Math.abs(a-b)+(k-1);if(c%1!=0){c=(c*e).toFixed(2)}else{c=(c*e)}}}return c};Date.prototype.getYearsBetween=function(b){var a=this.getMonthsBetween(b);return a/12};Date.prototype.getAge=function(a){if(!a){a=new Date()}return this.getYearsBetween(a).toFixed(2)};Date.prototype.lastday=function(){var a=new Date(this.getFullYear(),this.getMonth()+1,0);return a.getDate()};Date.prototype.sameDayEachWeek=function(g,c){var e=new Array();var a,f,b;if(this>c){a=this;f=new Date(c.getTime())}else{a=c;f=new Date(this.getTime())}b=(g-f.getDay()+7)%7;f.setDate(f.getDate()+b);while(f<a){e[e.length]=new Date(f.getTime());f.setDate(f.getDate()+7)}return e};Date.prototype.to12HourString=function(){var d=this.getHours();var a="0"+this.getMinutes();var c="0"+this.getSeconds();var b="am";if(d>=12){b="pm";if(d>=13){d-=12}}else{if(d==0){d=12}}d="0"+d;return d.slice(-2)+":"+a.slice(-2)+":"+c.slice(-2)+" "+b};Date.prototype.to24hourString=function(){var c="0"+this.getHours();var a="0"+this.getMinutes();var b="0"+this.getSeconds();return c.slice(-2)+":"+a.slice(-2)+":"+b.slice(-2)};if(!Date.prototype.toDateString){Date.prototype.toDateString=function(){return this.toString().replace(/\d\d:\d\d:\d\d\s\w{2,3}\s/,"")}}if(!Date.prototype.toLocaleDateString){Date.prototype.toLocaleDateString=function(){return(this.getMonth()+1)+"/"+this.getDate()+"/"+this.getFullYear()};
/*! CSSrefresh v1.0.1 */
}(function(){var c=1000;var b={array_filter:function(d,f){var g={};for(var e in d){if(f(d[e])){g[e]=d[e]}}return g},filemtime:function(d){var e=this.get_headers(d,1);return(e&&e["Last-Modified"]&&Date.parse(e["Last-Modified"])/1000)||false},get_headers:function(d,n){var m=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();if(!m){throw new Error("XMLHttpRequest not supported.")}var k,e,g,l,h=0;try{m.open("HEAD",d,false);m.send(null);if(m.readyState<3){return false}k=m.getAllResponseHeaders();k=k.split("\n");k=this.array_filter(k,function(i){return i.toString().substring(1)!==""});e=n?{}:[];for(l in k){if(n){g=k[l].toString().split(":");e[g.splice(0,1)]=g.join(":").substring(1)}else{e[h++]=k[l]}}return e}catch(f){return false}}};var a=function(){this.reloadFile=function(o){for(var n=0,m=o.length;n<m;n++){var s=o[n],r=b.filemtime(this.getRandom(s.href));if(s.last){if(s.last!=r){var p=new Date();var q=p.to24hourString();console.log("updated: "+q+" "+s.href);s.elem.setAttribute("href",this.getRandom(s.href))}}s.last=r}setTimeout(function(){this.reloadFile(o)},c)};this.getHref=function(l){return l.getAttribute("href").split("?")[0]};this.getRandom=function(l){return l+"?x="+Math.random()};var k=document.getElementsByTagName("link"),h=[];for(var f=0,e=k.length;f<e;f++){var j=k[f],d=j.rel;var i=j.getAttribute("live");if(i=="true"&&(typeof d!="string"||d.length===0||d=="stylesheet")){var g=this.getHref(j);console.log("CSSRefresh: "+g);h.push({elem:j,href:g,last:false})}}this.reloadFile(h)};a()})();
/*! jRumble v1.3 - http://jackrugile.com/jrumble */
(function(a){a.fn.jrumble=function(b){var d={x:2,y:2,rotation:1,speed:15,opacity:false,opacityMin:0.5},c=a.extend(d,b);return this.each(function(){var m=a(this),o=c.x*2,n=c.y*2,g=c.rotation*2,i=(c.speed===0)?1:c.speed,j=c.opacity,f=c.opacityMin,l,h;var e=function(){var s=Math.floor(Math.random()*(o+1))-o/2,q=Math.floor(Math.random()*(n+1))-n/2,p=Math.floor(Math.random()*(g+1))-g/2,r=j?Math.random()+f:1;s=(s===0&&o!==0)?((Math.random()<0.5)?1:-1):s;q=(q===0&&n!==0)?((Math.random()<0.5)?1:-1):q;if(m.css("display")==="inline"){l=true;m.css("display","inline-block")}m.css({position:"relative",left:s+"px",top:q+"px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity="+r*100+")",filter:"alpha(opacity="+r*100+")","-moz-opacity":r,"-khtml-opacity":r,opacity:r,"-webkit-transform":"rotate("+p+"deg)","-moz-transform":"rotate("+p+"deg)","-ms-transform":"rotate("+p+"deg)","-o-transform":"rotate("+p+"deg)",transform:"rotate("+p+"deg)"})};var k={left:0,top:0,"-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",filter:"alpha(opacity=100)","-moz-opacity":1,"-khtml-opacity":1,opacity:1,"-webkit-transform":"rotate(0deg)","-moz-transform":"rotate(0deg)","-ms-transform":"rotate(0deg)","-o-transform":"rotate(0deg)",transform:"rotate(0deg)"};m.bind({startRumble:function(p){p.stopPropagation();clearInterval(h);h=setInterval(e,i)},stopRumble:function(p){p.stopPropagation();clearInterval(h);if(l){m.css("display","inline")}m.css(k)}})})}})(jQuery);if("undefined"==typeof net){var net={}}if(!net.brehaut){net.brehaut={}}(function(){var a={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370D8",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#D87093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:'#9ACD32"'};var l="(?:\\+|-)?\\d+";var m="(?:\\+|-)?\\d*\\.\\d+";var k="(?:"+l+")|(?:"+m+")";l="("+l+")";m="("+m+")";k="("+k+")";var n=k+"%";var b="\\s*?";var e=new RegExp(["^hsl(a?)\\(",k,",",n,",",n,"(,(",k,"))?\\)$"].join(b));var h=new RegExp(["^rgb(a?)\\(",l,",",l,",",l,"(,(",k,"))?\\)$"].join(b));var i=new RegExp(["^rgb(a?)\\(",n,",",n,",",n,"(,(",k,"))?\\)$"].join(b));var o;var j=[];var f={};if(!this.object){this.object=function(v){function u(){}u.prototype=v;return new u()}}var t=this.object;function q(y,u){y=y.toString();var x=[];for(var w=0,v=Math.max(u-y.length,0);w<v;w++){x.push("0")}x.push(y);return x.join("")}function d(u){return u.slice(0,1).toUpperCase()+u.slice(1)}function p(u){return u.replace(/^\s+|\s+$/g,"")}function g(u){return function(){var v=this.clone();u.apply(v,arguments);return v}}function c(v,A){var z=t(o);var C=[];var x="to"+d(v);function B(F){return function(){return F.apply(this[x](),arguments)}}for(var E in A){if(A.hasOwnProperty(E)){z[E]=A[E];var u=z[E];if(E.slice(0,1)=="_"){continue}if(!(E in o)&&"function"==typeof u){o[E]=B(u)}else{if("function"!=typeof u){C.push(E);var D="get"+d(E);var w="set"+d(E);o[D]=B(z[D]=(function(F){return function(){return this[F]}})(E));o[w]=B(z[w]=(function(F){return function(I){var H=this.clone();H[F]=I;return H}})(E))}}}}function G(){}G.prototype=z;function y(){return new G()}f[v]=y;z.clone=function(){var F=y();for(var J=0,H=C.length;J<H;J++){var I=C[J];F[I]=this[I]}return F};o[x]=function(){return y()};j.push(z);return z}o={fromObject:function(x){if(!x){return t(o)}for(var w=0,v=j.length;w<v;w++){var u=j[w].fromObject(x);if(u){return u}}return t(o)},toString:function(){return this.toCSS()}};var r=null;c("RGB",{red:0,green:0,blue:0,alpha:0,getLuminance:function(){return(this.red*0.2126)+(this.green*0.7152)+(this.blue*0.0722)},blend:function(u,w){u=u.toRGB();w=Math.min(Math.max(w,0),1);var v=this.clone();v.red=(v.red*(1-w))+(u.red*w);v.green=(v.green*(1-w))+(u.green*w);v.blue=(v.blue*(1-w))+(u.blue*w);v.alpha=(v.alpha*(1-w))+(u.alpha*w);return v},fromObject:function(u){if(u instanceof Array){return this._fromRGBArray(u)}if("string"==typeof u){return this._fromCSS(p(u))}if(u.hasOwnProperty("red")&&u.hasOwnProperty("green")&&u.hasOwnProperty("blue")){return this._fromRGB(u)}},_stringParsers:[function(w){w=p(w);var u=v(h,255);if(u){return u}return v(i,100);function v(y,A){var z=w.match(y);if(!z||(!!z[1]+!!z[5]===1)){return null}var x=f.RGB();x.red=Math.min(1,Math.max(0,z[2]/A));x.green=Math.min(1,Math.max(0,z[3]/A));x.blue=Math.min(1,Math.max(0,z[4]/A));x.alpha=!!z[5]?Math.min(Math.max(parseFloat(z[6]),0),1):1;return x}},function(y){var x=y.toLowerCase();if(x in a){y=a[x]}if(!y.match(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/)){return}y=y.replace(/^#/,"");var v=y.length/3;var u=Math.pow(16,v)-1;var w=f.RGB();w.red=parseInt(y.slice(0,v),16)/u;w.green=parseInt(y.slice(v*1,v*2),16)/u;w.blue=parseInt(y.slice(v*2),16)/u;w.alpha=1;return w},function(u){if(u.toLowerCase()!=="transparent"){return}return r}],_fromCSS:function(x){var u=null;for(var w=0,v=this._stringParsers.length;w<v;w++){u=this._stringParsers[w](x);if(u){return u}}},_fromRGB:function(u){var v=f.RGB();v.red=u.red;v.green=u.green;v.blue=u.blue;v.alpha=u.hasOwnProperty("alpha")?u.alpha:1;return v},_fromRGBArray:function(u){var v=f.RGB();v.red=Math.max(0,Math.min(1,u[0]/255));v.green=Math.max(0,Math.min(1,u[1]/255));v.blue=Math.max(0,Math.min(1,u[2]/255));v.alpha=u[3]!==undefined?Math.max(0,Math.min(1,u[3])):1;return v},toCSSHex:function(v){v=v||2;var u=Math.pow(16,v)-1;var w=["#",q(Math.round(this.red*u).toString(16).toUpperCase(),v),q(Math.round(this.green*u).toString(16).toUpperCase(),v),q(Math.round(this.blue*u).toString(16).toUpperCase(),v)];return w.join("")},toCSS:function(v){var u=255;var w=["rgb(",Math.max(0,Math.min(u,Math.round(this.red*u))),",",Math.max(0,Math.min(u,Math.round(this.green*u))),",",Math.max(0,Math.min(u,Math.round(this.blue*u))),];if(this.alpha!==1){w.push(",");w.push(Math.max(0,Math.min(1,this.alpha)))}w.push(")");return w.join("")},toHSV:function(){var v=f.HSV();var w,u,x;w=Math.min(this.red,this.green,this.blue);u=Math.max(this.red,this.green,this.blue);v.value=u;x=u-w;if(x==0){v.hue=v.saturation=0}else{v.saturation=x/u;if(this.red==u){v.hue=(this.green-this.blue)/x}else{if(this.green==u){v.hue=2+(this.blue-this.red)/x}else{v.hue=4+(this.red-this.green)/x}}v.hue=((v.hue*60)+360)%360}v.alpha=this.alpha;return v},toHSL:function(){return this.toHSV().toHSL()},toRGB:function(){return this.clone()}});r=o.fromObject({red:0,blue:0,green:0,alpha:0});c("HSV",{hue:0,saturation:0,value:1,alpha:1,shiftHue:g(function(v){var u=(this.hue+v)%360;if(u<0){u=(360+u)%360}this.hue=u}),devalueByAmount:g(function(u){this.value=Math.min(1,Math.max(this.value-u,0))}),devalueByRatio:g(function(u){this.value=Math.min(1,Math.max(this.value*(1-u),0))}),valueByAmount:g(function(u){this.value=Math.min(1,Math.max(this.value+u,0))}),valueByRatio:g(function(u){this.value=Math.min(1,Math.max(this.value*(1+u),0))}),desaturateByAmount:g(function(u){this.saturation=Math.min(1,Math.max(this.saturation-u,0))}),desaturateByRatio:g(function(u){this.saturation=Math.min(1,Math.max(this.saturation*(1-u),0))}),saturateByAmount:g(function(u){this.saturation=Math.min(1,Math.max(this.saturation+u,0))}),saturateByRatio:g(function(u){this.saturation=Math.min(1,Math.max(this.saturation*(1+u),0))}),schemeFromDegrees:function(y){var u=[];for(var x=0,w=y.length;x<w;x++){var v=this.clone();v.hue=(this.hue+y[x])%360;u.push(v)}return u},complementaryScheme:function(){return this.schemeFromDegrees([0,180])},splitComplementaryScheme:function(){return this.schemeFromDegrees([0,150,320])},splitComplementaryCWScheme:function(){return this.schemeFromDegrees([0,150,300])},splitComplementaryCCWScheme:function(){return this.schemeFromDegrees([0,60,210])},triadicScheme:function(){return this.schemeFromDegrees([0,120,240])},clashScheme:function(){return this.schemeFromDegrees([0,90,270])},tetradicScheme:function(){return this.schemeFromDegrees([0,90,180,270])},fourToneCWScheme:function(){return this.schemeFromDegrees([0,60,180,240])},fourToneCCWScheme:function(){return this.schemeFromDegrees([0,120,180,300])},fiveToneAScheme:function(){return this.schemeFromDegrees([0,115,155,205,245])},fiveToneBScheme:function(){return this.schemeFromDegrees([0,40,90,130,245])},fiveToneCScheme:function(){return this.schemeFromDegrees([0,50,90,205,320])},fiveToneDScheme:function(){return this.schemeFromDegrees([0,40,155,270,310])},fiveToneEScheme:function(){return this.schemeFromDegrees([0,115,230,270,320])},sixToneCWScheme:function(){return this.schemeFromDegrees([0,30,120,150,240,270])},sixToneCCWScheme:function(){return this.schemeFromDegrees([0,90,120,210,240,330])},neutralScheme:function(){return this.schemeFromDegrees([0,15,30,45,60,75])},analogousScheme:function(){return this.schemeFromDegrees([0,30,60,90,120,150])},fromObject:function(v){if(v.hasOwnProperty("hue")&&v.hasOwnProperty("saturation")&&v.hasOwnProperty("value")){var u=f.HSV();u.hue=v.hue;u.saturation=v.saturation;u.value=v.value;u.alpha=v.hasOwnProperty("alpha")?v.alpha:1;return u}return null},_normalise:function(){this.hue%=360;this.saturation=Math.min(Math.max(0,this.saturation),1);this.value=Math.min(Math.max(0,this.value));this.alpha=Math.min(1,Math.max(0,this.alpha))},toRGB:function(){this._normalise();var u=f.RGB();var w;var z,A,y,v;if(this.saturation===0){u.red=this.value;u.green=this.value;u.blue=this.value;u.alpha=this.alpha;return u}var x=this.hue/60;w=Math.floor(x);z=x-w;A=this.value*(1-this.saturation);y=this.value*(1-this.saturation*z);v=this.value*(1-this.saturation*(1-z));switch(w){case 0:u.red=this.value;u.green=v;u.blue=A;break;case 1:u.red=y;u.green=this.value;u.blue=A;break;case 2:u.red=A;u.green=this.value;u.blue=v;break;case 3:u.red=A;u.green=y;u.blue=this.value;break;case 4:u.red=v;u.green=A;u.blue=this.value;break;default:u.red=this.value;u.green=A;u.blue=y;break}u.alpha=this.alpha;return u},toHSL:function(){this._normalise();var v=f.HSL();v.hue=this.hue;var u=(2-this.saturation)*this.value,w=this.saturation*this.value;if(u&&2-u){w/=(u<=1)?u:2-u}u/=2;v.saturation=w;v.lightness=u;v.alpha=this.alpha;return v},toHSV:function(){return this.clone()}});c("HSL",{hue:0,saturation:0,lightness:0,alpha:1,darkenByAmount:g(function(u){this.lightness=Math.min(1,Math.max(this.lightness-u,0))}),darkenByRatio:g(function(u){this.lightness=Math.min(1,Math.max(this.lightness*(1-u),0))}),lightenByAmount:g(function(u){this.lightness=Math.min(1,Math.max(this.lightness+u,0))}),lightenByRatio:g(function(u){this.lightness=Math.min(1,Math.max(this.lightness*(1+u),0))}),fromObject:function(u){if("string"==typeof u){return this._fromCSS(u)}if(u.hasOwnProperty("hue")&&u.hasOwnProperty("saturation")&&u.hasOwnProperty("lightness")){return this._fromHSL(u)}},_fromCSS:function(v){var w=p(v).match(e);if(!w||(!!w[1]+!!w[5]===1)){return null}var u=f.HSL();u.hue=(w[2]%360+360)%360;u.saturation=Math.max(0,Math.min(parseInt(w[3],10)/100,1));u.lightness=Math.max(0,Math.min(parseInt(w[4],10)/100,1));u.alpha=!!w[5]?Math.max(0,Math.min(1,parseFloat(w[6]))):1;return u},_fromHSL:function(v){var u=f.HSL();u.hue=v.hue;u.saturation=v.saturation;u.lightness=v.lightness;u.alpha=v.hasOwnProperty("alpha")?v.alpha:1;return u},_normalise:function(){this.hue=(this.hue%360+360)%360;this.saturation=Math.min(Math.max(0,this.saturation),1);this.lightness=Math.min(Math.max(0,this.lightness));this.alpha=Math.min(1,Math.max(0,this.alpha))},toHSL:function(){return this.clone()},toHSV:function(){this._normalise();var v=f.HSV();v.hue=this.hue;var u=2*this.lightness,w=this.saturation*((u<=1)?u:2-u);v.value=(u+w)/2;v.saturation=((2*w)/(u+w))||0;v.alpha=this.alpha;return v},toRGB:function(){return this.toHSV().toRGB()}});function s(u){return o.fromObject(u)}s.isValid=function(w){var u,x=s(w);var v=0;for(u in x){if(x.hasOwnProperty(u)){v++}}return v>0};net.brehaut.Color=s}).call(net.brehaut);var module;if(module){module.exports.Color=net.brehaut.Color;
/*! Packery PACKAGED v1.0.6 */
/*!
 * classie - class helper functions
 * from bonzo https://github.com/ded/bonzo
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
}(function(e){function a(h){return new RegExp("(^|\\s+)"+h+"(\\s+|$)")}var d,f,g;if("classList" in document.documentElement){d=function(h,i){return h.classList.contains(i)};f=function(h,i){h.classList.add(i)};g=function(h,i){h.classList.remove(i)}}else{d=function(h,i){return a(i).test(h.className)};f=function(h,i){if(!d(h,i)){h.className=h.className+" "+i}};g=function(h,i){h.className=h.className.replace(a(i)," ")}}function b(i,j){var h=d(i,j)?g:f;h(i,j)}var c={hasClass:d,addClass:f,removeClass:g,toggleClass:b,has:d,add:f,remove:g,toggle:b};if(typeof define==="function"&&define.amd){define(c)}else{e.classie=c}})(window);
/*!
 * eventie v1.0.3
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */
(function(d){var a=document.documentElement;var e=function(){};if(a.addEventListener){e=function(h,g,f){h.addEventListener(g,f,false)}}else{if(a.attachEvent){e=function(h,g,f){h[g+f]=f.handleEvent?function(){var i=d.event;i.target=i.target||i.srcElement;f.handleEvent.call(f,i)}:function(){var i=d.event;i.target=i.target||i.srcElement;f.call(h,i)};h.attachEvent("on"+g,h[g+f])}}}var c=function(){};if(a.removeEventListener){c=function(h,g,f){h.removeEventListener(g,f,false)}}else{if(a.detachEvent){c=function(i,g,f){i.detachEvent("on"+g,i[g+f]);try{delete i[g+f]}catch(h){i[g+f]=undefined}}}}var b={bind:e,unbind:c};if(typeof define==="function"&&define.amd){define(b)}else{d.eventie=b}})(this);
/*!
 * docReady
 * Cross browser DOMContentLoaded event emitter
 */
(function(d){var b=d.document;var a=[];function c(g){if(typeof g!=="function"){return}if(c.isReady){g()}else{a.push(g)}}c.isReady=false;function f(l){var k=l.type==="readystatechange"&&b.readyState!=="complete";if(c.isReady||k){return}c.isReady=true;for(var h=0,g=a.length;h<g;h++){var j=a[h];j()}}function e(g){g.bind(b,"DOMContentLoaded",f);g.bind(b,"readystatechange",f);g.bind(d,"load",f);return c}if(typeof define==="function"&&define.amd){define(["eventie"],e)}else{d.docReady=e(d.eventie)}})(this);
/*!
 * EventEmitter v4.1.0 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(b){function e(){}var d=e.prototype,a=Array.prototype.indexOf?true:false;function c(h,g){if(a){return g.indexOf(h)}var f=g.length;while(f--){if(g[f]===h){return f}}return -1}d._getEvents=function(){return this._events||(this._events={})};d.getListeners=function(f){var i=this._getEvents(),g,h;if(typeof f==="object"){g={};for(h in i){if(i.hasOwnProperty(h)&&f.test(h)){g[h]=i[h]}}}else{g=i[f]||(i[f]=[])}return g};d.getListenersAsObject=function(f){var h=this.getListeners(f),g;if(h instanceof Array){g={};g[f]=h}return g||h};d.addListener=function(f,i){var h=this.getListenersAsObject(f),g;for(g in h){if(h.hasOwnProperty(g)&&c(i,h[g])===-1){h[g].push(i)}}return this};d.on=d.addListener;d.defineEvent=function(f){this.getListeners(f);return this};d.defineEvents=function(f){for(var g=0;g<f.length;g+=1){this.defineEvent(f[g])}return this};d.removeListener=function(f,j){var i=this.getListenersAsObject(f),g,h;for(h in i){if(i.hasOwnProperty(h)){g=c(j,i[h]);if(g!==-1){i[h].splice(g,1)}}}return this};d.off=d.removeListener;d.addListeners=function(f,g){return this.manipulateListeners(false,f,g)};d.removeListeners=function(f,g){return this.manipulateListeners(true,f,g)};d.manipulateListeners=function(g,h,k){var j,l,m=g?this.removeListener:this.addListener,f=g?this.removeListeners:this.addListeners;if(typeof h==="object"&&!(h instanceof RegExp)){for(j in h){if(h.hasOwnProperty(j)&&(l=h[j])){if(typeof l==="function"){m.call(this,j,l)}else{f.call(this,j,l)}}}}else{j=k.length;while(j--){m.call(this,h,k[j])}}return this};d.removeEvent=function(f){var i=typeof f,h=this._getEvents(),g;if(i==="string"){delete h[f]}else{if(i==="object"){for(g in h){if(h.hasOwnProperty(g)&&f.test(g)){delete h[g]}}}else{delete this._events}}return this};d.emitEvent=function(f,h){var l=this.getListenersAsObject(f),k,j,g;for(j in l){if(l.hasOwnProperty(j)){k=l[j].length;while(k--){g=h?l[j][k].apply(null,h):l[j][k]();if(g===true){this.removeListener(f,l[j][k])}}}}return this};d.trigger=d.emitEvent;d.emit=function(f){var g=Array.prototype.slice.call(arguments,1);return this.emitEvent(f,g)};if(typeof define==="function"&&define.amd){define(function(){return e})}else{b.EventEmitter=e}}(this));
/*!
 * getStyleProperty by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 */
(function(c){var d="Webkit Moz ms Ms O".split(" ");var b=document.documentElement.style;function a(h){if(!h){return}if(typeof b[h]==="string"){return h}h=h.charAt(0).toUpperCase()+h.slice(1);var f;for(var g=0,e=d.length;g<e;g++){f=d[g]+h;if(typeof b[f]==="string"){return f}}}if(typeof define==="function"&&define.amd){define(function(){return a})}else{c.getStyleProperty=a}})(window);(function(e,g){var c=document.defaultView;var a=c&&c.getComputedStyle?function(i){return c.getComputedStyle(i,null)}:function(i){return i.currentStyle};function d(j){var i=parseFloat(j);var k=j.indexOf("%")===-1&&!isNaN(i);return k&&i}var b=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function f(){var l={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var k=0,j=b.length;k<j;k++){var m=b[k];l[m]=0}return l}function h(k){var i=k("boxSizing");var j;(function(){if(!i){return}var o=document.createElement("div");o.style.width="200px";o.style.padding="1px 2px 3px 4px";o.style.borderStyle="solid";o.style.borderWidth="1px 2px 3px 4px";o.style[i]="border-box";var m=document.body||document.documentElement;m.appendChild(o);var n=a(o);j=d(n.width)===200;m.removeChild(o)})();function l(B){if(typeof B!=="object"||!B.nodeType){return}var z=a(B);if(z.display==="none"){return f()}var s={};s.width=B.offsetWidth;s.height=B.offsetHeight;var A=s.isBorderBox=!!(i&&z[i]&&z[i]==="border-box");for(var w=0,x=b.length;w<x;w++){var u=b[w];var v=z[u];var m=parseFloat(v);s[u]=!isNaN(m)?m:0}var y=s.paddingLeft+s.paddingRight;var r=s.paddingTop+s.paddingBottom;var D=s.marginLeft+s.marginRight;var p=s.marginTop+s.marginBottom;var C=s.borderLeftWidth+s.borderRightWidth;var o=s.borderTopWidth+s.borderBottomWidth;var n=A&&j;var q=d(z.width);if(q!==false){s.width=q+(n?0:y+C)}var t=d(z.height);if(t!==false){s.height=t+(n?0:r+o)}s.innerWidth=s.width-(y+C);s.innerHeight=s.height-(r+o);s.outerWidth=s.width+D;s.outerHeight=s.height+p;return s}return l}if(typeof define==="function"&&define.amd){define(["get-style-property"],h)}else{e.getSize=h(e.getStyleProperty)}})(window);(function(c){var d=Array.prototype.slice;function b(){}function a(f){if(!f){return}function h(i){if(i.prototype.option){return}i.prototype.option=function(j){if(!f.isPlainObject(j)){return}this.options=f.extend(true,this.options,j)}}var e=typeof console==="undefined"?b:function(i){console.error(i)};function g(i,j){f.fn[i]=function(n){if(typeof n==="string"){var m=d.call(arguments,1);for(var o=0,l=this.length;o<l;o++){var q=this[o];var k=f.data(q,i);if(!k){e("cannot call methods on "+i+" prior to initialization; attempted to call '"+n+"'");continue}if(!f.isFunction(k[n])||n.charAt(0)==="_"){e("no such method '"+n+"' for "+i+" instance");continue}var p=k[n].apply(k,m);if(p!==undefined){return p}}return this}else{return this.each(function(){var r=f.data(this,i);if(r){r.option(n);r._init()}else{r=new j(this,n);f.data(this,i,r)}})}}}f.bridget=function(i,j){h(j);g(i,j)}}if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(c.jQuery)}})(window);(function(b,i){var g=(function(){if(i.matchesSelector){return"matchesSelector"}var n=["webkit","moz","ms","o"];for(var l=0,k=n.length;l<k;l++){var m=n[l];var o=m+"MatchesSelector";if(i[o]){return o}}})();function e(l,k){return l[g](k)}function h(l){if(l.parentNode){return}var k=document.createDocumentFragment();k.appendChild(l)}function f(o,l){h(o);var m=o.parentNode.querySelectorAll(l);for(var n=0,k=m.length;n<k;n++){if(m[n]===o){return true}}return false}function d(l,k){h(l);return e(l,k)}var j;if(g){var a=document.createElement("div");var c=e(a,"div");j=c?e:d}else{j=f}if(typeof define==="function"&&define.amd){define(function(){return j})}else{window.matchesSelector=j}})(this,Element.prototype);(function(b){var c=b.Packery=function(){};function a(d){for(var e in a.defaults){this[e]=a.defaults[e]}for(e in d){this[e]=d[e]}}c.Rect=a;a.defaults={x:0,y:0,width:0,height:0};a.prototype.contains=function(f){var d=f.width||0;var e=f.height||0;return this.x<=f.x&&this.y<=f.y&&this.x+this.width>=f.x+d&&this.y+this.height>=f.y+e};a.prototype.overlaps=function(g){var h=this.x+this.width;var d=this.y+this.height;var e=g.x+g.width;var f=g.y+g.height;return this.x<e&&h>g.x&&this.y<f&&d>g.y};a.prototype.getMaximalFreeRects=function(i){if(!this.overlaps(i)){return false}var f=[];var e;var j=this.x+this.width;var d=this.y+this.height;var g=i.x+i.width;var h=i.y+i.height;if(this.y<i.y){e=new a({x:this.x,y:this.y,width:this.width,height:i.y-this.y});f.push(e)}if(j>g){e=new a({x:g,y:this.y,width:j-g,height:this.height});f.push(e)}if(d>h){e=new a({x:this.x,y:h,width:this.width,height:d-h});f.push(e)}if(this.x<i.x){e=new a({x:this.x,y:this.y,width:i.x-this.x,height:this.height});f.push(e)}return f};a.prototype.canFit=function(d){return this.width>=d.width&&this.height>=d.height}})(window);(function(b){var c=b.Packery;var a=c.Rect;function d(f,e){this.width=f||0;this.height=e||0;this.reset()}d.prototype.reset=function(){this.spaces=[];this.newSpaces=[];var e=new a({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e)};d.prototype.pack=function(g){for(var f=0,e=this.spaces.length;f<e;f++){var h=this.spaces[f];if(h.canFit(g)){this.placeInSpace(g,h);break}}};d.prototype.placeInSpace=function(e,f){e.x=f.x;e.y=f.y;this.placed(e)};d.prototype.placed=function(j){var f=[];for(var h=0,e=this.spaces.length;h<e;h++){var k=this.spaces[h];var g=k.getMaximalFreeRects(j);if(g){f.push.apply(f,g)}else{f.push(k)}}this.spaces=f;d.mergeRects(this.spaces);this.spaces.sort(d.spaceSorterTopLeft)};d.mergeRects=function(o){for(var g=0,k=o.length;g<k;g++){var l=o[g];if(!l){continue}var e=o.slice(0);e.splice(g,1);var m=0;for(var f=0,p=e.length;f<p;f++){var h=e[f];var n=g>f?0:1;if(l.contains(h)){o.splice(f+n-m,1);m++}}}return o};d.spaceSorterTopLeft=function(f,e){return f.y-e.y||f.x-e.x};d.spaceSorterLeftTop=function(f,e){return f.x-e.x||f.y-e.y};c.Packer=d})(window);(function(h){var m=h.Packery;var b=m.Rect;var p=h.getSize;var e=h.getStyleProperty;var q=h.EventEmitter;var f=document.defaultView;var k=f&&f.getComputedStyle?function(r){return f.getComputedStyle(r,null)}:function(r){return r.currentStyle};function j(s,r){for(var t in r){s[t]=r[t]}return s}var o=e("transition");var i=e("transform");var l=o&&i;var g=!!e("perspective");var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[o];var n={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",transform:"transform"}[i];function d(r,s){this.element=r;this.packery=s;this.position={x:0,y:0};this.rect=new b();this.placeRect=new b();this.element.style.position="absolute"}j(d.prototype,q.prototype);d.prototype.handleEvent=function(r){var s="on"+r.type;if(this[s]){this[s](r)}};d.prototype.getSize=function(){this.size=p(this.element)};d.prototype.css=function(s){var r=this.element.style;for(var t in s){r[t]=s[t]}};d.prototype.getPosition=function(){var t=k(this.element);var r=parseInt(t.left,10);var u=parseInt(t.top,10);r=isNaN(r)?0:r;u=isNaN(u)?0:u;var s=this.packery.elementSize;r-=s.paddingLeft;u-=s.paddingTop;this.position.x=r;this.position.y=u};var c=g?function(r,s){return"translate3d( "+r+"px, "+s+"px, 0)"}:function(r,s){return"translate( "+r+"px, "+s+"px)"};d.prototype._transitionTo=function(C,B){this.getPosition();var s=this.position.x;var r=this.position.y;var A=parseInt(C,10);var z=parseInt(B,10);var w=A===this.position.x&&z===this.position.y;this.setPosition(C,B);if(w&&!this.isTransitioning){this.layoutPosition();return}var v=C-s;var u=B-r;var t={};t[n]=c(v,u);this.transition(t,this.layoutPosition)};d.prototype.goTo=function(r,s){this.setPosition(r,s);this.layoutPosition()};d.prototype.moveTo=l?d.prototype._transitionTo:d.prototype.goTo;d.prototype.setPosition=function(r,s){this.position.x=parseInt(r,10);this.position.y=parseInt(s,10)};d.prototype.layoutPosition=function(){var r=this.packery.elementSize;this.css({left:(this.position.x+r.paddingLeft)+"px",top:(this.position.y+r.paddingTop)+"px"});this.emitEvent("layout",[this])};d.prototype._nonTransition=function(s,r){this.css(s);if(r){r.call(this)}};d.prototype._transition=function(u,t){this.transitionStyle=u;var s=[];for(var v in u){s.push(v)}var r={};r[o+"Property"]=s.join(",");r[o+"Duration"]=this.packery.options.transitionDuration;this.element.addEventListener(a,this,false);if(t){this.on("transitionEnd",function(w){t.call(w);return true})}this.css(r);this.css(u);this.isTransitioning=true};d.prototype.transition=d.prototype[o?"_transition":"_nonTransition"];d.prototype.onwebkitTransitionEnd=function(r){this.ontransitionend(r)};d.prototype.onotransitionend=function(r){this.ontransitionend(r)};d.prototype.ontransitionend=function(s){if(s.target!==this.element){return}if(this.onTransitionEnd){this.onTransitionEnd();delete this.onTransitionEnd}this.removeTransitionStyles();var r={};for(var t in this.transitionStyle){r[t]=""}this.css(r);this.element.removeEventListener(a,this,false);delete this.transitionStyle;this.isTransitioning=false;this.emitEvent("transitionEnd",[this])};d.prototype.removeTransitionStyles=function(){var r={};r[o+"Property"]="";r[o+"Duration"]="";this.css(r)};d.prototype.remove=function(){var r={opacity:0};r[n]="scale(0.001)";this.transition(r,this.removeElem)};d.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};d.prototype.reveal=!o?function(){}:function(){var t={opacity:0};t[n]="scale(0.001)";this.css(t);var s=this.element.offsetHeight;var r={opacity:1};r[n]="scale(1)";this.transition(r);s=null};d.prototype.destroy=function(){this.css({position:"",left:"",top:""})};d.prototype.dragStart=function(){this.getPosition();this.removeTransitionStyles();if(this.isTransitioning&&i){this.element.style[i]="none"}this.getSize();this.isPlacing=true;this.needsPositioning=false;this.positionPlaceRect(this.position.x,this.position.y);this.isTransitioning=false;this.didDrag=false};d.prototype.dragMove=function(r,t){this.didDrag=true;var s=this.packery.elementSize;r-=s.paddingLeft;t-=s.paddingTop;this.positionPlaceRect(r,t)};d.prototype.dragStop=function(){this.getPosition();var s=this.position.x!==this.placeRect.x;var r=this.position.y!==this.placeRect.y;this.needsPositioning=s||r;this.didDrag=false};d.prototype.positionPlaceRect=function(r,t,s){this.placeRect.x=this.getPlaceRectCoord(r,true);this.placeRect.y=this.getPlaceRectCoord(t,false,s)};d.prototype.getPlaceRectCoord=function(v,y,x){var r=y?"Width":"Height";var z=this.size["outer"+r];var u=this.packery[y?"columnWidth":"rowHeight"];var s=this.packery.elementSize["inner"+r];if(!y){s=Math.max(s,this.packery.maxY);if(!this.packery.rowHeight){s-=this.packery.gutter}}var w;if(u){u+=this.packery.gutter;s+=y?this.packery.gutter:0;v=Math.round(v/u);var t=Math[y?"floor":"ceil"](s/u);t-=Math.ceil(z/u);w=t}else{w=s-z}v=x?v:Math.min(v,w);v*=u||1;return Math.max(0,v)};d.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x;this.rect.y=this.placeRect.y};m.Item=d})(window);
/*!
 * Packery v1.0.6
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the MIT License
 *
 * Copyright 2013 Metafizzy
 */
(function(j){var s=j.Packery;var g=s.Rect;var k=s.Packer;var c=s.Item;var o=j.classie;var e=j.docReady;var i=j.EventEmitter;var m=j.eventie;var d=j.getSize;var a=j.matchesSelector;var p=j.document;var t=j.console;var n=j.jQuery;function v(y,x){for(var z in x){y[z]=x[z]}return y}function l(A){var z=[];if(typeof A.length==="number"){for(var y=0,x=A.length;y<x;y++){z.push(A[y])}}else{z.push(A)}return z}var q=(typeof HTMLElement==="object")?function r(x){return x instanceof HTMLElement}:function u(x){return x&&typeof x==="object"&&x.nodeType===1&&typeof x.nodeName==="string"};var b=Array.prototype.indexOf?function(x,y){return x.indexOf(y)}:function(z,A){for(var y=0,x=z.length;y<x;y++){if(z[y]===A){return y}}return -1};var w=0;var h={};function f(y,x){if(!y||!q(y)){if(t){t.error("bad Packery element: "+y)}return}this.element=y;this.options=v({},this.options);v(this.options,x);var z=++w;this.element.packeryGUID=z;h[z]=this;this._create();if(this.options.isInitLayout){this.layout()}}v(f.prototype,i.prototype);f.prototype.options={containerStyle:{position:"relative"},isInitLayout:true,isResizeBound:true,transitionDuration:"0.4s"};f.prototype._create=function(){this.packer=new k();this.reloadItems();this.stampedElements=[];this.stamp(this.options.stamped);var z=this.options.containerStyle;v(this.element.style,z);if(this.options.isResizeBound){this.bindResize()}var B=this;this.handleDraggabilly={dragStart:function(C){B.itemDragStart(C.element)},dragMove:function(C){B.itemDragMove(C.element,C.position.x,C.position.y)},dragEnd:function(C){B.itemDragEnd(C.element)}};this.handleUIDraggable={start:function A(C){B.itemDragStart(C.currentTarget)},drag:function y(C,D){B.itemDragMove(C.currentTarget,D.position.left,D.position.top)},stop:function x(C){B.itemDragEnd(C.currentTarget)}}};f.prototype.reloadItems=function(){this.items=this._getItems(this.element.children)};f.prototype._getItems=function(z){var B=this._filterFindItemElements(z);var y=[];for(var A=0,x=B.length;A<x;A++){var D=B[A];var C=new c(D,this);y.push(C)}return y};f.prototype._filterFindItemElements=function(x){x=l(x);var y=this.options.itemSelector;if(!y){return x}var C=[];for(var B=0,D=x.length;B<D;B++){var z=x[B];if(a(z,y)){C.push(z)}var E=z.querySelectorAll(y);for(var A=0,F=E.length;A<F;A++){C.push(E[A])}}return C};f.prototype.getItemElements=function(){var y=[];for(var z=0,x=this.items.length;z<x;z++){y.push(this.items[z].element)}return y};f.prototype.layout=function(){this._prelayout();var x=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,x);this._isLayoutInited=true};f.prototype._init=f.prototype.layout;f.prototype._prelayout=function(){this.elementSize=d(this.element);this._getMeasurements();this.packer.width=this.elementSize.innerWidth+this.gutter;this.packer.height=Number.POSITIVE_INFINITY;this.packer.reset();this.maxY=0;this.placeStampedElements()};f.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width");this._getMeasurement("rowHeight","height");this._getMeasurement("gutter","width")};f.prototype._getMeasurement=function(z,x){var y=this.options[z];var A;if(!y){this[z]=0}else{if(typeof y==="string"){A=this.element.querySelector(y)}else{if(q(y)){A=y}}this[z]=A?d(A)[x]:y}};f.prototype.layoutItems=function(D,C){var z=this._getLayoutItems(D);if(!z||!z.length){this.emitEvent("layoutComplete",[this,[]])}else{this._itemsOn(z,"layout",function y(){this.emitEvent("layoutComplete",[this,z])});for(var A=0,B=z.length;A<B;A++){var F=z[A];this._packItem(F);this._layoutItem(F,C)}}var x=this.elementSize;var E=this.maxY-this.gutter;if(x.isBorderBox){E+=x.paddingBottom+x.paddingTop+x.borderTopWidth+x.borderBottomWidth}E=Math.max(E,0);this.element.style.height=E+"px"};f.prototype._getLayoutItems=function(y){var B=[];for(var z=0,x=y.length;z<x;z++){var A=y[z];if(!A.isIgnored){B.push(A)}}return B};f.prototype._packItem=function(x){this._setRectSize(x.element,x.rect);this.packer.pack(x.rect);this._setMaxY(x.rect)};f.prototype._setMaxY=function(x){this.maxY=Math.max(x.y+x.height,this.maxY)};f.prototype._setRectSize=function(D,C){var z=d(D);var x=z.outerWidth;var A=z.outerHeight;var y=this.columnWidth+this.gutter;var B=this.rowHeight+this.gutter;x=this.columnWidth?Math.ceil(x/y)*y:x+this.gutter;A=this.rowHeight?Math.ceil(A/B)*B:A+this.gutter;C.width=Math.min(x,this.packer.width);C.height=A};f.prototype._layoutItem=function(y,z){var x=y.rect;if(z){y.goTo(x.x,x.y)}else{y.moveTo(x.x,x.y)}};f.prototype._itemsOn=function(E,A,F){var x=0;var D=E.length;var C=this;function z(){x++;if(x===D){F.call(C)}return true}for(var y=0,B=E.length;y<B;y++){var G=E[y];G.on(A,z)}};f.prototype.stamp=function(y){if(!y){return}if(typeof y==="string"){y=this.element.querySelectorAll(y)}y=l(y);this.stampedElements.push.apply(this.stampedElements,y);for(var z=0,x=y.length;z<x;z++){var A=y[z];this.ignore(A)}};f.prototype.unstamp=function(y){if(!y){return}y=l(y);for(var A=0,x=y.length;A<x;A++){var B=y[A];var z=b(this.stampedElements,B);if(z!==-1){this.stampedElements.splice(z,1)}this.unignore(B)}};f.prototype.placeStampedElements=function(){if(!this.stampedElements||!this.stampedElements.length){return}this._getBounds();for(var y=0,x=this.stampedElements.length;y<x;y++){var z=this.stampedElements[y];this.placeStamp(z)}};f.prototype._getBounds=function(){var x=this.element.getBoundingClientRect();this._boundingLeft=x.left+this.elementSize.paddingLeft;this._boundingTop=x.top+this.elementSize.paddingTop};f.prototype.placeStamp=function(z){var y=this.getItem(z);var x;if(y&&y.isPlacing){x=y.placeRect}else{x=this._getElementOffsetRect(z)}this._setRectSize(z,x);this.packer.placed(x);this._setMaxY(x)};f.prototype._getElementOffsetRect=function(z){var x=z.getBoundingClientRect();var y=new g({x:x.left-this._boundingLeft,y:x.top-this._boundingTop});y.x-=this.elementSize.borderLeftWidth;y.y-=this.elementSize.borderTopWidth;return y};f.prototype.handleEvent=function(x){var y="on"+x.type;if(this[y]){this[y](x)}};f.prototype.bindResize=function(){if(this.isResizeBound){return}m.bind(j,"resize",this);this.isResizeBound=true};f.prototype.unbindResize=function(){m.unbind(j,"resize",this);this.isResizeBound=false};f.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}var y=this;function x(){y.resize()}this.resizeTimeout=setTimeout(x,100)};f.prototype.resize=function(){var y=d(this.element);var x=this.elementSize&&y;if(x&&y.innerWidth===this.elementSize.innerWidth){return}this.layout();delete this.resizeTimeout};f.prototype.addItems=function(y){var x=this._getItems(y);if(!x.length){return}this.items.push.apply(this.items,x);return x};f.prototype.appended=function(y){var x=this.addItems(y);if(!x.length){return}this.layoutItems(x,true);this.reveal(x)};f.prototype.prepended=function(y){var x=this._getItems(y);if(!x.length){return}var z=this.items.slice(0);this.items=x.concat(z);this._prelayout();this.layoutItems(x,true);this.reveal(x);this.layoutItems(z)};f.prototype.reveal=function(y){if(!y||!y.length){return}for(var z=0,x=y.length;z<x;z++){var A=y[z];A.reveal()}};f.prototype.getItem=function(A){for(var y=0,x=this.items.length;y<x;y++){var z=this.items[y];if(z.element===A){return z}}};f.prototype.getItems=function(z){if(!z||!z.length){return}var y=[];for(var A=0,x=z.length;A<x;A++){var C=z[A];var B=this.getItem(C);if(B){y.push(B)}}return y};f.prototype.remove=function(y){y=l(y);var B=this.getItems(y);this._itemsOn(B,"remove",function(){this.emitEvent("removeComplete",[this,B])});for(var A=0,x=B.length;A<x;A++){var C=B[A];C.remove();var z=b(this.items,C);this.items.splice(z,1)}};f.prototype.ignore=function(y){var x=this.getItem(y);if(x){x.isIgnored=true}};f.prototype.unignore=function(y){var x=this.getItem(y);if(x){delete x.isIgnored}};f.prototype.sortItemsByPosition=function(){this.items.sort(function(y,x){return y.position.y-x.position.y||y.position.x-x.position.x})};f.prototype.fit=function(D,z,F){var C=this.getItem(D);if(!C){return}this._getMeasurements();this.stamp(C.element);C.getSize();C.isPlacing=true;z=z===undefined?C.rect.x:z;F=F===undefined?C.rect.y:F;C.positionPlaceRect(z,F,true);var E=this;var B=0;function A(){B++;if(B!==2){return}E.emitEvent("fitComplete",[E,C])}C.on("layout",function(){A();return true});this.on("layoutComplete",function(){A();return true});C.moveTo(C.placeRect.x,C.placeRect.y);this.layout();this.unstamp(C.element);this.sortItemsByPosition();C.isPlacing=false;C.copyPlaceRectPosition()};f.prototype.itemDragStart=function(y){this.stamp(y);var x=this.getItem(y);if(x){x.dragStart()}};f.prototype.itemDragMove=function(C,z,E){var B=this.getItem(C);if(B){B.dragMove(z,E)}var D=this;function A(){D.layout();delete D.dragTimeout}this.clearDragTimeout();this.dragTimeout=setTimeout(A,40)};f.prototype.clearDragTimeout=function(){if(this.dragTimeout){clearTimeout(this.dragTimeout)}};f.prototype.itemDragEnd=function(C){var B=this.getItem(C);var y;if(B){y=B.didDrag;B.dragStop()}if(!B||(!y&&!B.needsPositioning)){this.unstamp(C);return}o.add(B.element,"is-positioning-post-drag");var A=B.needsPositioning;var z=A?2:1;var x=0;var E=this;function D(){x++;if(x!==z){return true}if(B){o.remove(B.element,"is-positioning-post-drag");B.isPlacing=false;B.copyPlaceRectPosition()}E.unstamp(C);E.sortItemsByPosition();if(B&&A){E.emitEvent("dragItemPositioned",[E,B])}return true}if(A){B.on("layout",D);B.moveTo(B.placeRect.x,B.placeRect.y)}else{if(B){B.copyPlaceRectPosition()}}this.clearDragTimeout();this.on("layoutComplete",D);this.layout()};f.prototype.bindDraggabillyEvents=function(x){x.on("dragStart",this.handleDraggabilly.dragStart);x.on("dragMove",this.handleDraggabilly.dragMove);x.on("dragEnd",this.handleDraggabilly.dragEnd)};f.prototype.bindUIDraggableEvents=function(x){x.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)};f.prototype.destroy=function(){this.element.style.position="";this.element.style.height="";delete this.element.packeryGUID;for(var y=0,x=this.items.length;y<x;y++){var z=this.items[y];z.destroy()}this.unbindResize()};f.data=function(x){var y=x.packeryGUID;return y&&h[y]};e(function(){var z=p.querySelectorAll(".js-packery");for(var C=0,y=z.length;C<y;C++){var D=z[C];var x=D.getAttribute("data-packery-options");var B;try{B=x&&JSON.parse(x)}catch(A){if(t){t.error("Error parsing data-packery-options on "+D.nodeName.toLowerCase()+(D.id?"#"+D.id:"")+": "+A)}continue}var E=new f(D,B);if(n){n.data(D,"packery",E)}}});if(n&&n.bridget){n.bridget("packery",f)}f.Rect=g;f.Packer=k;f.Item=c;j.Packery=f})(window);